{
  "info": {
    "_postman_id": "0b7c76e6-28b1-4d2c-9b1d-0a5e6b9a2b2c",
    "name": "RightTouch Backend (Full API + Role-based)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Full Postman collection for RightTouch backend. Includes DEV bypass setup, OTP auth + password reset, profile, address, category/service/product CRUD + image uploads, cart + checkout, bookings, rating/report, payments, technician onboarding (KYC + owner approval), job broadcast + accept, and wallet endpoints."
  },
  "item": [
    {
      "name": "00 - DEV Setup (Optional)",
      "description": "Use these ONLY if ENABLE_DEV_USER_CREATION=true and DEV_ROUTE_SECRET is set. They create users and return tokens directly.",
      "item": [
        {
          "name": "DEV - Create Owner (sets tokenOwner + ownerProfileId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "x-dev-secret", "value": "{{devSecret}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/dev/users", "host": ["{{baseUrl}}"], "path": ["api", "dev", "users"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"Owner\",\n  \"email\": \"{{devOwnerEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\",\n  \"profile\": {\n    \"mobileNumber\": \"7000000001\",\n    \"firstName\": \"Owner\",\n    \"lastName\": \"One\",\n    \"profileComplete\": true\n  }\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenOwner', j?.result?.token || j?.token || '');",
                  "pm.environment.set('ownerProfileId', j?.result?.profileId || '');",
                  "pm.test('Owner token saved', () => pm.expect(pm.environment.get('tokenOwner')).to.not.equal(''));"
                ]
              }
            }
          ]
        },
        {
          "name": "DEV - Create Technician (sets tokenTechnician + technicianProfileId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "x-dev-secret", "value": "{{devSecret}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/dev/users", "host": ["{{baseUrl}}"], "path": ["api", "dev", "users"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"Technician\",\n  \"email\": \"{{devTechnicianEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\",\n  \"profile\": {\n    \"mobileNumber\": \"{{technicianMobile}}\",\n    \"firstName\": \"Tech\",\n    \"lastName\": \"One\",\n    \"profileComplete\": false,\n    \"workStatus\": \"pending\",\n    \"availability\": { \"isOnline\": false }\n  }\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenTechnician', j?.result?.token || j?.token || '');",
                  "pm.environment.set('technicianProfileId', j?.result?.profileId || '');",
                  "pm.test('Technician token saved', () => pm.expect(pm.environment.get('tokenTechnician')).to.not.equal(''));"
                ]
              }
            }
          ]
        },
        {
          "name": "DEV - Create Customer (sets tokenCustomer + customerProfileId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "x-dev-secret", "value": "{{devSecret}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/dev/users", "host": ["{{baseUrl}}"], "path": ["api", "dev", "users"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"Customer\",\n  \"email\": \"{{devCustomerEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\",\n  \"profile\": {\n    \"mobileNumber\": \"{{customerMobile}}\",\n    \"firstName\": \"Customer\",\n    \"lastName\": \"One\",\n    \"profileComplete\": true\n  }\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenCustomer', j?.result?.token || j?.token || '');",
                  "pm.environment.set('customerProfileId', j?.result?.profileId || '');",
                  "pm.test('Customer token saved', () => pm.expect(pm.environment.get('tokenCustomer')).to.not.equal(''));"
                ]
              }
            }
          ]
        },
        {
          "name": "DEV - Create Admin (sets tokenAdmin + adminProfileId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "x-dev-secret", "value": "{{devSecret}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/dev/users", "host": ["{{baseUrl}}"], "path": ["api", "dev", "users"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"Admin\",\n  \"email\": \"{{devAdminEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\",\n  \"profile\": {\n    \"mobileNumber\": \"7000000002\",\n    \"firstName\": \"Admin\",\n    \"lastName\": \"One\",\n    \"profileComplete\": true\n  }\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenAdmin', j?.result?.token || j?.token || '');",
                  "pm.environment.set('adminProfileId', j?.result?.profileId || '');",
                  "pm.test('Admin token saved', () => pm.expect(pm.environment.get('tokenAdmin')).to.not.equal(''));"
                ]
              }
            }
          ]
        }
      ]
    },

    {
      "name": "01 - Auth (OTP Flow)",
      "description": "Production OTP-based signup/login. OTP value must be taken from SMS provider logs.",
      "item": [
        {
          "name": "Signup + Send OTP",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/signup", "host": ["{{baseUrl}}"], "path": ["api", "user", "signup"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\"\n}" }
          }
        },
        {
          "name": "Resend OTP",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/resend-otp", "host": ["{{baseUrl}}"], "path": ["api", "user", "resend-otp"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\"\n}" }
          }
        },
        {
          "name": "Verify OTP",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/verify-otp", "host": ["{{baseUrl}}"], "path": ["api", "user", "verify-otp"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\",\n  \"otp\": \"{{otpCustomer}}\"\n}" }
          }
        },
        {
          "name": "Set Password (after OTP verified)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/set-password", "host": ["{{baseUrl}}"], "path": ["api", "user", "set-password"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "if (j?.token) pm.environment.set('tokenCustomer', j.token);",
                  "if (j?.role) pm.environment.set('customerRole', j.role);",
                  "if (j?.profileComplete !== undefined) pm.environment.set('customerProfileComplete', String(j.profileComplete));"
                ]
              }
            }
          ]
        },
        {
          "name": "Login (Customer) -> tokenCustomer",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/login", "host": ["{{baseUrl}}"], "path": ["api", "user", "login"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"password\": \"{{testPassword}}\",\n  \"role\": \"Customer\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenCustomer', j?.token || '');",
                  "pm.test('tokenCustomer saved', () => pm.expect(pm.environment.get('tokenCustomer')).to.not.equal(''));"
                ]
              }
            }
          ]
        },
        {
          "name": "Login (Technician) -> tokenTechnician",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/login", "host": ["{{baseUrl}}"], "path": ["api", "user", "login"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{technicianMobile}}\",\n  \"password\": \"{{testPassword}}\",\n  \"role\": \"Technician\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "pm.environment.set('tokenTechnician', j?.token || '');",
                  "pm.test('tokenTechnician saved', () => pm.expect(pm.environment.get('tokenTechnician')).to.not.equal(''));"
                ]
              }
            }
          ]
        },
        {
          "name": "Request Password Reset OTP",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/request-password-reset-otp", "host": ["{{baseUrl}}"], "path": ["api", "user", "request-password-reset-otp"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\"\n}" }
          }
        },
        {
          "name": "Verify Password Reset OTP",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/verify-password-reset-otp", "host": ["{{baseUrl}}"], "path": ["api", "user", "verify-password-reset-otp"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\",\n  \"otp\": \"{{otpCustomer}}\"\n}" }
          }
        },
        {
          "name": "Reset Password (after OTP verified)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/user/reset-password", "host": ["{{baseUrl}}"], "path": ["api", "user", "reset-password"] },
            "body": { "mode": "raw", "raw": "{\n  \"mobileNumber\": \"{{customerMobile}}\",\n  \"role\": \"Customer\",\n  \"newPassword\": \"{{testPassword}}\"\n}" }
          }
        }
      ]
    },

    {
      "name": "02 - Profile (All Roles)",
      "item": [
        {
          "name": "Get My Profile (Bearer tokenCustomer/tokenTechnician/tokenOwner)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/me", "host": ["{{baseUrl}}"], "path": ["api", "user", "me"] }
          }
        },
        {
          "name": "Complete Profile (Technician)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/complete-profile", "host": ["{{baseUrl}}"], "path": ["api", "user", "complete-profile"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Tech\",\n  \"lastName\": \"One\",\n  \"gender\": \"Male\",\n  \"mobileNumber\": \"{{technicianMobile}}\",\n  \"address\": \"12 Street\",\n  \"city\": \"Chennai\",\n  \"state\": \"TN\",\n  \"pincode\": \"600001\",\n  \"latitude\": {{technicianLat}},\n  \"longitude\": {{technicianLng}},\n  \"locality\": \"T Nagar\",\n  \"experienceYears\": 2,\n  \"specialization\": \"AC\"\n}" 
            }
          }
        },
        {
          "name": "Update My Profile (PUT /me)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/me", "host": ["{{baseUrl}}"], "path": ["api", "user", "me"] },
            "body": { "mode": "raw", "raw": "{\n  \"firstName\": \"Customer\",\n  \"lastName\": \"Updated\"\n}" }
          }
        }
      ]
    },

    {
      "name": "03 - Address (Customer/Admin/Owner)",
      "item": [
        {
          "name": "Create Address (Customer) -> addressId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/addresses", "host": ["{{baseUrl}}"], "path": ["api", "addresses"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"home\",\n  \"addressLine\": \"123 Main Street\",\n  \"city\": \"Chennai\",\n  \"state\": \"TN\",\n  \"pincode\": \"600001\",\n  \"latitude\": {{customerLat}},\n  \"longitude\": {{customerLng}},\n  \"isDefault\": true\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('addressId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get My Addresses (Customer)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/addresses", "host": ["{{baseUrl}}"], "path": ["api", "addresses"] }
          }
        },
        {
          "name": "Get Default Address (Customer)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/addresses/default", "host": ["{{baseUrl}}"], "path": ["api", "addresses", "default"] }
          }
        },
        {
          "name": "Set Default Address (Customer)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/addresses/default", "host": ["{{baseUrl}}"], "path": ["api", "addresses", "default"] },
            "body": { "mode": "raw", "raw": "{\n  \"addressId\": \"{{addressId}}\"\n}" }
          }
        },
        {
          "name": "Update Address (Customer)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/addresses", "host": ["{{baseUrl}}"], "path": ["api", "addresses"] },
            "body": { "mode": "raw", "raw": "{\n  \"addressId\": \"{{addressId}}\",\n  \"city\": \"Chennai\"\n}" }
          }
        },
        {
          "name": "Delete Address (Customer)",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/addresses", "host": ["{{baseUrl}}"], "path": ["api", "addresses"] },
            "body": { "mode": "raw", "raw": "{\n  \"addressId\": \"{{addressId}}\"\n}" }
          }
        },
        {
          "name": "Admin/Owner - Get All Addresses",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/addresses/admin/all", "host": ["{{baseUrl}}"], "path": ["api", "addresses", "admin", "all"] }
          }
        },
        {
          "name": "Admin/Owner - Get Address By Id",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/addresses/admin/{{addressId}}", "host": ["{{baseUrl}}"], "path": ["api", "addresses", "admin", "{{addressId}}"] }
          }
        }
      ]
    },

    {
      "name": "04 - Category",
      "item": [
        {
          "name": "Create Category (Owner/Admin) -> categoryId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/category", "host": ["{{baseUrl}}"], "path": ["api", "user", "category"] },
            "body": { "mode": "raw", "raw": "{\n  \"category\": \"Air Conditioner\",\n  \"description\": \"AC services\",\n  \"categoryType\": \"service\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('categoryId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload Category Image (form-data: image) ",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/category/upload-image", "host": ["{{baseUrl}}"], "path": ["api", "user", "category", "upload-image"] },
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "categoryId", "value": "{{categoryId}}", "type": "text" },
                { "key": "image", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Remove Category Image",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/category/remove-image", "host": ["{{baseUrl}}"], "path": ["api", "user", "category", "remove-image"] },
            "body": { "mode": "raw", "raw": "{\n  \"categoryId\": \"{{categoryId}}\"\n}" }
          }
        },
        {
          "name": "Get All Categories (optional ?categoryType=service)",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getAllcategory?categoryType=service", "host": ["{{baseUrl}}"], "path": ["api", "user", "getAllcategory"], "query": [{"key":"categoryType","value":"service"}] }
          }
        },
        {
          "name": "Get Category By Id",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getByIdcategory/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "getByIdcategory", "{{categoryId}}"] }
          }
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/updatecategory/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "updatecategory", "{{categoryId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"description\": \"Updated category description\"\n}" }
          }
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/deletecategory/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "deletecategory", "{{categoryId}}"] }
          }
        }
      ]
    },

    {
      "name": "05 - Service",
      "item": [
        {
          "name": "Create Service (Owner/Admin) -> serviceId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/service", "host": ["{{baseUrl}}"], "path": ["api", "user", "service"] },
            "body": { "mode": "raw", "raw": "{\n  \"categoryId\": \"{{categoryId}}\",\n  \"serviceName\": \"AC Repair\",\n  \"description\": \"Repair AC issues\",\n  \"serviceType\": \"Repair\",\n  \"pricingType\": \"fixed\",\n  \"serviceCost\": 499\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('serviceId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload Service Images (form-data: serviceImages[])",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/services/upload-images", "host": ["{{baseUrl}}"], "path": ["api", "user", "services", "upload-images"] },
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "serviceId", "value": "{{serviceId}}", "type": "text" },
                { "key": "serviceImages", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Remove Service Image",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/services/remove-image", "host": ["{{baseUrl}}"], "path": ["api", "user", "services", "remove-image"] },
            "body": { "mode": "raw", "raw": "{\n  \"serviceId\": \"{{serviceId}}\",\n  \"imageUrl\": \"PASTE_IMAGE_URL_HERE\"\n}" }
          }
        },
        {
          "name": "Replace Service Images (form-data: serviceImages[])",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/services/replace-images", "host": ["{{baseUrl}}"], "path": ["api", "user", "services", "replace-images"] },
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "serviceId", "value": "{{serviceId}}", "type": "text" },
                { "key": "serviceImages", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Get All Services",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getAllServices", "host": ["{{baseUrl}}"], "path": ["api", "user", "getAllServices"] }
          }
        },
        {
          "name": "Get Service By Id",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getServiceById/{{serviceId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "getServiceById", "{{serviceId}}"] }
          }
        },
        {
          "name": "Update Service",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/updateService/{{serviceId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "updateService", "{{serviceId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"serviceCost\": 599\n}" }
          }
        },
        {
          "name": "Delete Service",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/services/{{serviceId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "services", "{{serviceId}}"] }
          }
        }
      ]
    },

    {
      "name": "06 - Product",
      "item": [
        {
          "name": "Create Product (Owner/Admin) -> productId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/product", "host": ["{{baseUrl}}"], "path": ["api", "user", "product"] },
            "body": { "mode": "raw", "raw": "{\n  \"categoryId\": \"{{categoryId}}\",\n  \"productName\": \"Water Purifier\",\n  \"productType\": \"RO\",\n  \"description\": \"RO purifier\",\n  \"pricingModel\": \"starting_from\",\n  \"estimatedPriceFrom\": 5999\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('productId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload Product Images (form-data: productImages[])",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/product/upload-images", "host": ["{{baseUrl}}"], "path": ["api", "user", "product", "upload-images"] },
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "productId", "value": "{{productId}}", "type": "text" },
                { "key": "productImages", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Get Products",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getProduct", "host": ["{{baseUrl}}"], "path": ["api", "user", "getProduct"] }
          }
        },
        {
          "name": "Get One Product",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/getOneProduct/{{productId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "getOneProduct", "{{productId}}"] }
          }
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/updateProduct/{{productId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "updateProduct", "{{productId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"estimatedPriceFrom\": 6999\n}" }
          }
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/deleteProduct/{{productId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "deleteProduct", "{{productId}}"] }
          }
        }
      ]
    },

    {
      "name": "07 - Cart & Checkout (Customer -> Broadcast)",
      "item": [
        {
          "name": "Add Service to Cart",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/cart/add", "host": ["{{baseUrl}}"], "path": ["api", "user", "cart", "add"] },
            "body": { "mode": "raw", "raw": "{\n  \"itemType\": \"service\",\n  \"itemId\": \"{{serviceId}}\",\n  \"quantity\": 1\n}" }
          }
        },
        {
          "name": "Add Product to Cart",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/cart/add", "host": ["{{baseUrl}}"], "path": ["api", "user", "cart", "add"] },
            "body": { "mode": "raw", "raw": "{\n  \"itemType\": \"product\",\n  \"itemId\": \"{{productId}}\",\n  \"quantity\": 1\n}" }
          }
        },
        {
          "name": "Get My Cart -> cartId + cartItemId",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/cart/my-cart", "host": ["{{baseUrl}}"], "path": ["api", "user", "cart", "my-cart"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const cart = j?.result || j;",
                  "const cartId = cart?._id;",
                  "if (cartId) pm.environment.set('cartId', cartId);",
                  "const items = cart?.items || cart?.cartItems || [];",
                  "const firstItem = Array.isArray(items) ? items[0] : null;",
                  "if (firstItem?._id) pm.environment.set('cartItemId', firstItem._id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cart Item Quantity",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/cart/update", "host": ["{{baseUrl}}"], "path": ["api", "user", "cart", "update"] },
            "body": { "mode": "raw", "raw": "{\n  \"itemType\": \"service\",\n  \"itemId\": \"{{serviceId}}\",\n  \"quantity\": 2\n}" }
          }
        },
        {
          "name": "Remove Cart Item (DELETE /cart/remove/:id)",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/cart/remove/{{cartItemId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "cart", "remove", "{{cartItemId}}"] }
          }
        },
        {
          "name": "Checkout (creates ServiceBooking + JobBroadcast + notifications)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/checkout", "host": ["{{baseUrl}}"], "path": ["api", "user", "checkout"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"addressId\": \"{{addressId}}\",\n  \"paymentMode\": \"online\",\n  \"scheduledAt\": \"2026-01-15T10:00:00.000Z\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const booking = j?.result?.booking || j?.result?.serviceBooking || j?.result || j;",
                  "const bookingId = booking?._id || j?.result?.bookingId;",
                  "if (bookingId) pm.environment.set('bookingId', bookingId);"
                ]
              }
            }
          ]
        }
      ]
    },

    {
      "name": "08 - Technician Onboarding (Profile -> KYC -> Approval -> Online)",
      "item": [
        {
          "name": "Update Skills (Technician)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/technicianData", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technicianData"] },
            "body": { "mode": "raw", "raw": "{\n  \"skills\": [\n    { \"serviceId\": \"{{serviceId}}\" }\n  ]\n}" }
          }
        },
        {
          "name": "Submit KYC (Technician)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/kyc", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "kyc"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"aadhaarNumber\": \"123412341234\",\n  \"panNumber\": \"ABCDE1234F\",\n  \"drivingLicenseNumber\": \"TN0120060000000\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('technicianKycId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload KYC Documents (form-data: aadhaarImage/panImage/dlImage)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/kyc/upload", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "kyc", "upload"] },
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "aadhaarImage", "type": "file", "src": "" },
                { "key": "panImage", "type": "file", "src": "" },
                { "key": "dlImage", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Get My KYC (Technician)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/kyc/me", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "kyc", "me"] }
          }
        },
        {
          "name": "Owner/Admin - Get All KYC",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/kyc", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "kyc"] }
          }
        },
        {
          "name": "Owner - Verify KYC (sets Technician workStatus approved)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/kyc/verify", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "kyc", "verify"] },
            "body": { "mode": "raw", "raw": "{\n  \"technicianId\": \"{{technicianProfileId}}\",\n  \"status\": \"approved\"\n}" }
          }
        },
        {
          "name": "Go Online (Technician)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/updateTechnician/{{technicianProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "updateTechnician", "{{technicianProfileId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"availability\": { \"isOnline\": true }\n}" }
          }
        }
      ]
    },

    {
      "name": "09 - Jobs (Technician)",
      "item": [
        {
          "name": "My Broadcast Jobs (Technician)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/job-broadcast/my-jobs", "host": ["{{baseUrl}}"], "path": ["api", "technician", "job-broadcast", "my-jobs"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const first = Array.isArray(j?.result) ? j.result[0] : null;",
                  "if (first?._id) pm.environment.set('jobBroadcastId', first._id);",
                  "if (first?.bookingId?._id) pm.environment.set('bookingId', first.bookingId._id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Respond to Job (accept)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/job-broadcast/respond/{{jobBroadcastId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "job-broadcast", "respond", "{{jobBroadcastId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"accepted\"\n}" }
          }
        },
        {
          "name": "Update Booking Status (on_the_way/reached/in_progress/completed)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/status/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "status", "{{bookingId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"on_the_way\"\n}" }
          }
        },
        {
          "name": "Current Jobs",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/jobs/current", "host": ["{{baseUrl}}"], "path": ["api", "technician", "jobs", "current"] }
          }
        },
        {
          "name": "Job History",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/jobs/history", "host": ["{{baseUrl}}"], "path": ["api", "technician", "jobs", "history"] }
          }
        }
      ]
    },

    {
      "name": "10 - Bookings (Customer/Admin)",
      "item": [
        {
          "name": "Get All Bookings",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/service/booking", "host": ["{{baseUrl}}"], "path": ["api", "user", "service", "booking"] }
          }
        },
        {
          "name": "Get Customer Bookings (Customer)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/booking/getCustomerBookings", "host": ["{{baseUrl}}"], "path": ["api", "user", "booking", "getCustomerBookings"] }
          }
        },
        {
          "name": "Cancel Booking",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/booking/cancel/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "booking", "cancel", "{{bookingId}}"] },
            "body": { "mode": "raw", "raw": "{}" }
          }
        }
      ]
    },

    {
      "name": "11 - Rating",
      "item": [
        {
          "name": "Create Rating -> ratingId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/rating", "host": ["{{baseUrl}}"], "path": ["api", "user", "rating"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingId\": \"{{bookingId}}\",\n  \"bookingType\": \"service\",\n  \"serviceId\": \"{{serviceId}}\",\n  \"technicianId\": \"{{technicianProfileId}}\",\n  \"rates\": 5,\n  \"comment\": \"Great service\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('ratingId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Ratings",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user/getAllRatings", "host": ["{{baseUrl}}"], "path": ["api", "user", "getAllRatings"] } }
        },
        {
          "name": "Get Rating By Id",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user/getRatingById/{{ratingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "getRatingById", "{{ratingId}}"] } }
        },
        {
          "name": "Update Rating",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/updateRating/{{ratingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "updateRating", "{{ratingId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"rates\": 4,\n  \"comment\": \"Updated comment\"\n}" }
          }
        },
        {
          "name": "Delete Rating",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/deleteRating/{{ratingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "deleteRating", "{{ratingId}}"] }
          }
        }
      ]
    },

    {
      "name": "12 - Report",
      "item": [
        {
          "name": "Create Report -> reportId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/report", "host": ["{{baseUrl}}"], "path": ["api", "user", "report"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingId\": \"{{bookingId}}\",\n  \"bookingType\": \"service\",\n  \"serviceId\": \"{{serviceId}}\",\n  \"technicianId\": \"{{technicianProfileId}}\",\n  \"complaint\": \"Technician delayed\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('reportId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Reports",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user/getAllReports", "host": ["{{baseUrl}}"], "path": ["api", "user", "getAllReports"] } }
        },
        {
          "name": "Get Report By Id",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/getReportById/{{reportId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "getReportById", "{{reportId}}"] }
          }
        }
      ]
    },

    {
      "name": "13 - Payment",
      "item": [
        {
          "name": "Create Payment (after booking completed) -> paymentId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/payment", "host": ["{{baseUrl}}"], "path": ["api", "user", "payment"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingId\": \"{{bookingId}}\",\n  \"baseAmount\": 499\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('paymentId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Payment Status (pending->success/failed)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/payment/{{paymentId}}/status", "host": ["{{baseUrl}}"], "path": ["api", "user", "payment", "{{paymentId}}", "status"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"success\"\n}" }
          }
        }
      ]
    },

    {
      "name": "14 - Product Booking",
      "item": [
        {
          "name": "Get All Product Bookings",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/getAllProductBooking", "host": ["{{baseUrl}}"], "path": ["api", "user", "getAllProductBooking"] }
          }
        },
        {
          "name": "Update Product Booking Status",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/user/productBookingUpdate/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "productBookingUpdate", "{{bookingId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"completed\"\n}" }
          }
        },
        {
          "name": "Cancel Product Booking",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenCustomer}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/productBookingCancel/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "productBookingCancel", "{{bookingId}}"] }
          }
        }
      ]
    },

    {
      "name": "15 - Technician (CRUD)",
      "item": [
        {
          "name": "Create/Upsert Technician Data",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/technicianData", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technicianData"] },
            "body": { "mode": "raw", "raw": "{\n  \"skills\": [{ \"serviceId\": \"{{serviceId}}\" }]\n}" }
          }
        },
        {
          "name": "Get All Technicians (Owner/Admin)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technicianAll", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technicianAll"] }
          }
        },
        {
          "name": "Get Technician By Id",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technicianById/{{technicianProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technicianById", "{{technicianProfileId}}"] }
          }
        },
        {
          "name": "Get My Technician",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/me", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "me"] }
          }
        },
        {
          "name": "Update Technician (by id)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/updateTechnician/{{technicianProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "updateTechnician", "{{technicianProfileId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"availability\": { \"isOnline\": true }\n}" }
          }
        },
        {
          "name": "Update Technician Status (Owner/Admin)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/technician/status", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technician", "status"] },
            "body": { "mode": "raw", "raw": "{\n  \"technicianId\": \"{{technicianProfileId}}\",\n  \"workStatus\": \"approved\"\n}" }
          }
        },
        {
          "name": "Delete Technician (Owner/Admin)",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/technicianDelete/{{technicianProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "technicianDelete", "{{technicianProfileId}}"] }
          }
        }
      ]
    },

    {
      "name": "16 - Wallet",
      "item": [
        {
          "name": "Owner - Create Wallet Transaction -> walletTxnId",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{tokenOwner}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/technician/wallet/transaction", "host": ["{{baseUrl}}"], "path": ["api", "technician", "wallet", "transaction"] },
            "body": { "mode": "raw", "raw": "{\n  \"technicianId\": \"{{technicianProfileId}}\",\n  \"bookingId\": \"{{bookingId}}\",\n  \"amount\": 100,\n  \"type\": \"credit\",\n  \"source\": \"job\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const j = pm.response.json();",
                  "const id = j?.result?._id || j?._id;",
                  "if (id) pm.environment.set('walletTxnId', id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Technician - Wallet History",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenTechnician}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/wallet/history", "host": ["{{baseUrl}}"], "path": ["api", "technician", "wallet", "history"] }
          }
        },
        {
          "name": "Owner - Wallet History for technicianId (query param)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/technician/wallet/history?technicianId={{technicianProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "technician", "wallet", "history"], "query": [{"key":"technicianId","value":"{{technicianProfileId}}"}] }
          }
        }
      ]
    },

    {
      "name": "17 - Admin User Tools",
      "item": [
        {
          "name": "Get All Users By Role",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/users/Customer", "host": ["{{baseUrl}}"], "path": ["api", "user", "users", "Customer"] }
          }
        },
        {
          "name": "Get User By Id (role + id)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{tokenOwner}}" }],
            "url": { "raw": "{{baseUrl}}/api/user/users/Customer/{{customerProfileId}}", "host": ["{{baseUrl}}"], "path": ["api", "user", "users", "Customer", "{{customerProfileId}}"] }
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "{{baseUrl}}" }
  ]
}
